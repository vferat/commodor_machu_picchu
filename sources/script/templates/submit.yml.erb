batch_connect:
  template: "basic"
script:
{%- for item_name, item_values in application.slurm.items() %}
{%- if item_name in ["accounting_id", "queue_name", "wall_time"] %}
{%- if item_values.visible %}
{%- if item_name == "accounting_id" %}
  accounting_id: <%= auto_accounts %>
{%- elif item_name == "queue_name" %}
  queue_name: <%= auto_queues %>
{%- else %}
  {{ item_name }}: <%= {{ item_name }}%>
{%- endif %}
{%- else %}
  {{ item_name }}: {{ item_values.value }}
{%- endif %}
{%- endif %}
{%- endfor %}
  native:
{%- for item_name, item_values in application.slurm.items() %}
{%- if item_name in ["mem_per_cpu"] %}
{%- if item_values.visible %}
    ["--mem-per-cpu", "<%= {{ item_name }}%>"]
{%- else %}
    ["--mem-per-cpu", "{{ item_values.value }}"]
{%- endif %}
{%- endif %}
{%- endfor %}


